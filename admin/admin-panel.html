<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Doha Ben Jeddour Portfolio</title>
    <meta name="description" content="Professional admin panel for managing Doha Ben Jeddour's portfolio">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #8B5FBF;
            --secondary: #FF6B8B;
            --accent: #FFD166;
            --success: #2ecc71;
            --warning: #f39c12;
            --danger: #e74c3c;
            --info: #3498db;
            --dark: #2A2D43;
            --light: #FDF7F3;
            --text: #2A2D43;
            --text-light: #7A7E9D;
            --gray: #F3E9F1;
            --gray-dark: #E5E7EB;
            --gradient: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            --shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            --shadow-lg: 0 10px 30px rgba(0, 0, 0, 0.12);
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            --border-radius: 12px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #f8fafc;
            color: var(--text);
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .admin-layout {
            display: flex;
            min-height: 100vh;
            background: #f8fafc;
        }

        /* Sidebar */
        .admin-sidebar {
            width: 280px;
            background: var(--dark);
            color: white;
            transition: var(--transition);
            box-shadow: var(--shadow-lg);
            z-index: 1000;
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 2rem 1.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            background: var(--gradient);
        }

        .sidebar-header h1 {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .sidebar-header p {
            opacity: 0.9;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .sidebar-nav {
            flex: 1;
            padding: 1.5rem 0;
            overflow-y: auto;
        }

        .nav-section {
            margin-bottom: 1.5rem;
        }

        .nav-section-title {
            padding: 0.5rem 1.5rem;
            font-size: 0.8rem;
            text-transform: uppercase;
            color: rgba(255, 255, 255, 0.6);
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .nav-item {
            padding: 0.8rem 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            cursor: pointer;
            transition: var(--transition);
            border-left: 4px solid transparent;
            margin: 0.2rem 0;
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .nav-item.active {
            background: rgba(139, 95, 191, 0.2);
            border-left-color: var(--primary);
        }

        .nav-item i {
            width: 20px;
            text-align: center;
            font-size: 1.1rem;
        }

        .nav-badge {
            background: var(--primary);
            color: white;
            padding: 0.2rem 0.5rem;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
            margin-left: auto;
        }

        .sidebar-footer {
            padding: 1.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(0, 0, 0, 0.2);
        }

        /* Main Content */
        .admin-main {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-width: 0;
        }

        .admin-header {
            background: white;
            padding: 1rem 2rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 999;
            border-bottom: 1px solid var(--gray-dark);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 1.2rem;
            color: var(--text);
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 6px;
            transition: var(--transition);
        }

        .mobile-menu-btn:hover {
            background: var(--gray);
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            padding: 0.5rem 1rem;
            background: var(--gray);
            border-radius: 25px;
            transition: var(--transition);
            cursor: pointer;
        }

        .user-info:hover {
            background: var(--gray-dark);
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            background: var(--gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .user-details {
            display: flex;
            flex-direction: column;
        }

        .user-name {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .user-role {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .notification-bell {
            position: relative;
            background: none;
            border: none;
            font-size: 1.2rem;
            color: var(--text-light);
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 6px;
            transition: var(--transition);
        }

        .notification-bell:hover {
            color: var(--primary);
            background: var(--gray);
        }

        .notification-badge {
            position: absolute;
            top: 5px;
            right: 5px;
            background: var(--danger);
            color: white;
            border-radius: 50%;
            width: 8px;
            height: 8px;
        }

        .btn {
            padding: 0.7rem 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            text-decoration: none;
        }

        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.8rem;
        }

        .btn-lg {
            padding: 1rem 2rem;
            font-size: 1rem;
        }

        .btn-primary {
            background: var(--gradient);
            color: white;
        }

        .btn-secondary {
            background: var(--gray);
            color: var(--text);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-warning {
            background: var(--warning);
            color: white;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .btn:active {
            transform: translateY(0);
        }

        .admin-content {
            flex: 1;
            padding: 2rem;
            overflow-y: auto;
            background: #f8fafc;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Dashboard */
        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            gap: 1rem;
            transition: var(--transition);
            border-left: 4px solid var(--primary);
        }

        .stat-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
        }

        .stat-icon.primary { background: var(--primary); }
        .stat-icon.success { background: var(--success); }
        .stat-icon.warning { background: var(--warning); }
        .stat-icon.danger { background: var(--danger); }
        .stat-icon.info { background: var(--info); }

        .stat-info {
            flex: 1;
        }

        .stat-info h3 {
            font-size: 1.8rem;
            margin-bottom: 0.2rem;
            font-weight: 700;
        }

        .stat-info p {
            color: var(--text-light);
            font-size: 0.9rem;
            margin: 0;
        }

        .stat-trend {
            display: flex;
            align-items: center;
            gap: 0.3rem;
            font-size: 0.8rem;
            font-weight: 600;
            margin-top: 0.3rem;
        }

        .trend-up { color: var(--success); }
        .trend-down { color: var(--danger); }

        /* Quick Actions */
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .action-card {
            background: white;
            padding: 1.5rem;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid transparent;
        }

        .action-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary);
        }

        .action-icon {
            width: 60px;
            height: 60px;
            background: var(--gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            margin: 0 auto 1rem;
            transition: var(--transition);
        }

        .action-card:hover .action-icon {
            transform: scale(1.1);
        }

        .action-card h4 {
            margin-bottom: 0.5rem;
            color: var(--text);
        }

        .action-card p {
            color: var(--text-light);
            font-size: 0.9rem;
            margin: 0;
        }

        /* Recent Activity */
        .activity-timeline {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
        }

        .timeline-item {
            padding: 1.5rem;
            border-bottom: 1px solid var(--gray-dark);
            display: flex;
            align-items: center;
            gap: 1rem;
            transition: var(--transition);
        }

        .timeline-item:hover {
            background: var(--light);
        }

        .timeline-item:last-child {
            border-bottom: none;
        }

        .timeline-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1rem;
            flex-shrink: 0;
        }

        .timeline-content {
            flex: 1;
        }

        .timeline-content h4 {
            margin-bottom: 0.3rem;
            font-size: 0.95rem;
        }

        .timeline-content p {
            color: var(--text-light);
            font-size: 0.85rem;
            margin: 0;
        }

        .timeline-time {
            color: var(--text-light);
            font-size: 0.8rem;
            white-space: nowrap;
        }

        /* Forms */
        .section-card {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
            overflow: hidden;
            transition: var(--transition);
        }

        .section-card:hover {
            box-shadow: var(--shadow-lg);
        }

        .card-header {
            padding: 1.5rem 2rem;
            border-bottom: 1px solid var(--gray-dark);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--light);
        }

        .card-header h3 {
            margin: 0;
            color: var(--primary);
            font-size: 1.3rem;
        }

        .card-body {
            padding: 2rem;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text);
            font-size: 0.95rem;
        }

        .form-control {
            width: 100%;
            padding: 0.8rem 1rem;
            border: 2px solid var(--gray-dark);
            border-radius: 8px;
            font-family: 'Inter', sans-serif;
            transition: var(--transition);
            font-size: 0.95rem;
            background: white;
        }

        .form-control:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(139, 95, 191, 0.1);
        }

        textarea.form-control {
            min-height: 120px;
            resize: vertical;
            line-height: 1.5;
        }

        select.form-control {
            appearance: none;
            background-image: url("data:image/svg+xml;charset=US-ASCII,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 4 5'><path fill='%237A7E9D' d='M2 0L0 2h4zm0 5L0 3h4z'/></svg>");
            background-repeat: no-repeat;
            background-position: right 1rem center;
            background-size: 0.65rem;
            padding-right: 2.5rem;
        }

        .form-help {
            font-size: 0.85rem;
            color: var(--text-light);
            margin-top: 0.3rem;
        }

        .image-preview-container {
            margin-top: 1rem;
        }

        .image-preview {
            max-width: 200px;
            border-radius: 8px;
            box-shadow: var(--shadow);
            display: block;
        }

        .image-actions {
            margin-top: 0.5rem;
            display: flex;
            gap: 0.5rem;
        }

        /* Item Lists */
        .item-list {
            margin-top: 1.5rem;
        }

        .item-card {
            background: var(--light);
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            border-left: 4px solid var(--primary);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: var(--transition);
        }

        .item-card:hover {
            transform: translateX(5px);
            box-shadow: var(--shadow);
        }

        .item-info {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex: 1;
        }

        .item-thumbnail {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            object-fit: cover;
            flex-shrink: 0;
        }

        .item-details {
            flex: 1;
        }

        .item-details h4 {
            margin-bottom: 0.5rem;
            color: var(--text);
        }

        .item-details p {
            color: var(--text-light);
            font-size: 0.9rem;
            margin: 0;
        }

        .item-meta {
            display: flex;
            gap: 1rem;
            margin-top: 0.5rem;
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .item-actions {
            display: flex;
            gap: 0.5rem;
        }

        /* Status Messages */
        .status-message {
            padding: 1rem 1.5rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            display: none;
            align-items: center;
            gap: 0.8rem;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .status-success {
            background: #d4f4e0;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .status-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .status-warning {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }

        .status-info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        /* Tabs */
        .content-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 2rem;
            border-bottom: 1px solid var(--gray-dark);
        }

        .content-tab {
            padding: 0.8rem 1.5rem;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            color: var(--text-light);
        }

        .content-tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .content-tab:hover {
            color: var(--primary);
        }

        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
        }

        /* Settings */
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .setting-group {
            background: white;
            padding: 2rem;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }

        .setting-group h4 {
            margin-bottom: 1.5rem;
            color: var(--primary);
            font-size: 1.1rem;
        }

        .color-picker {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .color-preview {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            box-shadow: var(--shadow);
        }

        .system-info {
            background: var(--light);
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid var(--gray-dark);
        }

        .system-info p {
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .system-info strong {
            color: var(--primary);
        }

        /* Form Actions */
        .form-actions {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--gray-dark);
        }

        /* Gallery Filters */
        .gallery-filters {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        /* Messages */
        .message-item {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            border-left: 4px solid var(--info);
            box-shadow: var(--shadow);
        }

        .message-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .message-sender {
            font-weight: 600;
            color: var(--primary);
        }

        .message-date {
            color: var(--text-light);
            font-size: 0.85rem;
        }

        .message-subject {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--dark);
        }

        .message-content {
            color: var(--text);
            line-height: 1.5;
            margin-bottom: 1rem;
        }

        .message-actions {
            display: flex;
            gap: 0.5rem;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .admin-layout {
                flex-direction: column;
            }
            
            .admin-sidebar {
                width: 100%;
                height: auto;
                display: none;
            }
            
            .admin-sidebar.mobile-open {
                display: flex;
            }
            
            .sidebar-nav {
                display: flex;
                overflow-x: auto;
                padding: 1rem;
                flex-wrap: wrap;
            }
            
            .nav-section {
                margin-bottom: 0;
            }
            
            .nav-item {
                white-space: nowrap;
                border-left: none;
                border-bottom: 3px solid transparent;
                margin: 0 0.5rem;
            }
            
            .nav-item.active {
                border-left: none;
                border-bottom-color: var(--primary);
            }
            
            .mobile-menu-btn {
                display: block;
            }
        }

        @media (max-width: 768px) {
            .admin-content {
                padding: 1rem;
            }
            
            .card-body {
                padding: 1.5rem;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .dashboard-stats {
                grid-template-columns: 1fr;
            }
            
            .quick-actions {
                grid-template-columns: 1fr;
            }
            
            .item-card {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
            
            .item-actions {
                width: 100%;
                justify-content: flex-end;
            }
            
            .header-actions {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .user-details {
                display: none;
            }
            
            .form-actions {
                flex-direction: column;
            }
        }

        @media (max-width: 480px) {
            .admin-header {
                padding: 1rem;
            }
            
            .card-header {
                padding: 1rem 1.5rem;
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }
            
            .item-info {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .item-thumbnail {
                width: 100%;
                height: 150px;
            }
            
            .content-tabs {
                flex-direction: column;
            }
            
            .content-tab {
                text-align: left;
            }
        }
    </style>
</head>
<body>
    <div class="admin-layout">
        <!-- Sidebar -->
        <div class="admin-sidebar" id="sidebar">
            <div class="sidebar-header">
                <h1>Doha Ben Jeddour</h1>
                <p>Portfolio Admin System</p>
            </div>
            
            <div class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-title">Main</div>
                    <div class="nav-item active" data-tab="dashboard">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Dashboard</span>
                        <span class="nav-badge">Live</span>
                    </div>
                </div>
                
                <div class="nav-section">
                    <div class="nav-section-title">Content</div>
                    <div class="nav-item" data-tab="about">
                        <i class="fas fa-user-edit"></i>
                        <span>About Section</span>
                    </div>
                    <div class="nav-item" data-tab="gallery">
                        <i class="fas fa-images"></i>
                        <span>Gallery</span>
                        <span class="nav-badge" id="galleryBadge">0</span>
                    </div>
                    <div class="nav-item" data-tab="projects">
                        <i class="fas fa-project-diagram"></i>
                        <span>Projects</span>
                        <span class="nav-badge" id="projectsBadge">0</span>
                    </div>
                </div>
                
                <div class="nav-section">
                    <div class="nav-section-title">Communication</div>
                    <div class="nav-item" data-tab="contact">
                        <i class="fas fa-address-book"></i>
                        <span>Contact Info</span>
                    </div>
                    <div class="nav-item" data-tab="messages">
                        <i class="fas fa-envelope"></i>
                        <span>Messages</span>
                        <span class="nav-badge" id="messagesBadge">0</span>
                    </div>
                </div>
                
                <div class="nav-section">
                    <div class="nav-section-title">System</div>
                    <div class="nav-item" data-tab="settings">
                        <i class="fas fa-cogs"></i>
                        <span>Settings</span>
                    </div>
                    <div class="nav-item" data-tab="backup">
                        <i class="fas fa-database"></i>
                        <span>Backup & Restore</span>
                    </div>
                </div>
            </div>
            
            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar" id="userInitials">A</div>
                    <div class="user-details">
                        <div class="user-name" id="userName">Administrator</div>
                        <div class="user-role">Super Admin</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="admin-main">
            <div class="admin-header">
                <div class="header-left">
                    <button class="mobile-menu-btn" id="mobileMenuBtn">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h2 id="currentTab">Dashboard</h2>
                </div>
                
                <div class="header-actions">
                    <button class="btn btn-outline" onclick="previewPortfolio()">
                        <i class="fas fa-eye"></i> Preview Portfolio
                    </button>
                    <button class="notification-bell" onclick="switchTab('messages')">
                        <i class="fas fa-bell"></i>
                        <div class="notification-badge" id="notificationBadge" style="display: none;"></div>
                    </button>
                    <div class="user-info">
                        <div class="user-avatar" id="headerUserInitials">A</div>
                        <div class="user-details">
                            <div class="user-name" id="headerUserName">Admin</div>
                        </div>
                    </div>
                    <button class="btn btn-danger btn-sm" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </div>
            </div>

            <div class="admin-content">
                <!-- Status Messages -->
                <div id="statusMessage" class="status-message"></div>

                <!-- Dashboard Tab -->
                <div id="dashboard" class="tab-content active">
                    <div class="dashboard-stats">
                        <div class="stat-card">
                            <div class="stat-icon primary">
                                <i class="fas fa-images"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="galleryCount">0</h3>
                                <p>Gallery Items</p>
                                <div class="stat-trend trend-up">
                                    <i class="fas fa-arrow-up"></i>
                                    <span id="galleryTrend">0% this month</span>
                                </div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon success">
                                <i class="fas fa-project-diagram"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="projectsCount">0</h3>
                                <p>Active Projects</p>
                                <div class="stat-trend trend-up">
                                    <i class="fas fa-arrow-up"></i>
                                    <span id="projectsTrend">0% this month</span>
                                </div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon warning">
                                <i class="fas fa-eye"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="viewsCount">0</h3>
                                <p>Portfolio Views</p>
                                <div class="stat-trend trend-up">
                                    <i class="fas fa-arrow-up"></i>
                                    <span id="viewsTrend">0% this week</span>
                                </div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon info">
                                <i class="fas fa-envelope"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="messagesCount">0</h3>
                                <p>New Messages</p>
                                <div class="stat-trend trend-down">
                                    <i class="fas fa-arrow-down"></i>
                                    <span id="messagesTrend">0% this week</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="quick-actions">
                        <div class="action-card" onclick="switchTab('gallery')">
                            <div class="action-icon">
                                <i class="fas fa-plus"></i>
                            </div>
                            <h4>Add Artwork</h4>
                            <p>Upload new gallery items</p>
                        </div>
                        <div class="action-card" onclick="switchTab('projects')">
                            <div class="action-icon">
                                <i class="fas fa-project-diagram"></i>
                            </div>
                            <h4>New Project</h4>
                            <p>Create featured project</p>
                        </div>
                        <div class="action-card" onclick="switchTab('about')">
                            <div class="action-icon">
                                <i class="fas fa-edit"></i>
                            </div>
                            <h4>Update Bio</h4>
                            <p>Edit about section</p>
                        </div>
                        <div class="action-card" onclick="exportData()">
                            <div class="action-icon">
                                <i class="fas fa-download"></i>
                            </div>
                            <h4>Export Data</h4>
                            <p>Backup portfolio data</p>
                        </div>
                    </div>

                    <div class="section-card">
                        <div class="card-header">
                            <h3>Recent Activity</h3>
                            <button class="btn btn-outline btn-sm" onclick="loadActivity()">
                                <i class="fas fa-sync-alt"></i> Refresh
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="activity-timeline" id="recentActivity">
                                <!-- Activity items will be loaded here -->
                            </div>
                        </div>
                    </div>

                    <div class="section-card">
                        <div class="card-header">
                            <h3>Recent Messages</h3>
                            <button class="btn btn-outline btn-sm" onclick="switchTab('messages')">
                                <i class="fas fa-envelope"></i> View All
                            </button>
                        </div>
                        <div class="card-body">
                            <div id="recentMessages">
                                <!-- Recent messages will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- About Tab -->
                <div id="about" class="tab-content">
                    <div class="section-card">
                        <div class="card-header">
                            <h3>About Section Management</h3>
                            <div>
                                <button class="btn btn-secondary btn-sm" onclick="previewAbout()">
                                    <i class="fas fa-eye"></i> Preview
                                </button>
                                <button class="btn btn-outline btn-sm" onclick="resetAbout()">
                                    <i class="fas fa-undo"></i> Reset
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <form id="aboutForm">
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="aboutImage">Profile Image URL</label>
                                        <input type="url" id="aboutImage" class="form-control" 
                                               placeholder="https://example.com/profile-image.jpg">
                                        <div class="form-help">Recommended: Square image, minimum 400x400 pixels</div>
                                        <div class="image-preview-container">
                                            <img id="aboutImagePreview" class="image-preview" src="" alt="Preview" style="display: none;">
                                            <div class="image-actions">
                                                <button type="button" class="btn btn-secondary btn-sm" onclick="clearImage('aboutImage')">
                                                    <i class="fas fa-times"></i> Clear
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group full-width">
                                        <label for="aboutText1">Introduction Text</label>
                                        <textarea id="aboutText1" class="form-control" 
                                                  placeholder="Write a compelling introduction about yourself and your artistic journey..."
                                                  rows="4"></textarea>
                                        <div class="form-help">This appears first in your about section</div>
                                    </div>
                                    
                                    <div class="form-group full-width">
                                        <label for="aboutText2">Background Story</label>
                                        <textarea id="aboutText2" class="form-control" 
                                                  placeholder="Share your artistic background, education, and professional experience..."
                                                  rows="4"></textarea>
                                        <div class="form-help">Detailed background information</div>
                                    </div>
                                    
                                    <div class="form-group full-width">
                                        <label for="aboutQuote">Inspirational Quote</label>
                                        <textarea id="aboutQuote" class="form-control" 
                                                  placeholder="Enter your favorite artistic quote or personal philosophy..."
                                                  rows="3"></textarea>
                                        <div class="form-help">This will be displayed in a special quote box</div>
                                    </div>
                                    
                                    <div class="form-group full-width">
                                        <label for="aboutText3">Closing Statement</label>
                                        <textarea id="aboutText3" class="form-control" 
                                                  placeholder="Conclude your about section with future goals or artistic vision..."
                                                  rows="3"></textarea>
                                        <div class="form-help">Final thoughts and call-to-action</div>
                                    </div>
                                </div>
                                <div class="form-actions">
                                    <button type="submit" class="btn btn-primary btn-lg">
                                        <i class="fas fa-save"></i> Save About Section
                                    </button>
                                    <button type="button" class="btn btn-outline" onclick="previewAbout()">
                                        <i class="fas fa-eye"></i> Live Preview
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Gallery Tab -->
                <div id="gallery" class="tab-content">
                    <div class="content-tabs">
                        <button class="content-tab active" data-content="add-gallery">Add New Artwork</button>
                        <button class="content-tab" data-content="manage-gallery">Manage Gallery</button>
                        <button class="content-tab" data-content="gallery-settings">Gallery Settings</button>
                    </div>

                    <div class="content-section active" id="add-gallery">
                        <div class="section-card">
                            <div class="card-header">
                                <h3>Add New Artwork</h3>
                            </div>
                            <div class="card-body">
                                <form id="galleryForm">
                                    <div class="form-grid">
                                        <div class="form-group">
                                            <label for="galleryImage">Image URL</label>
                                            <input type="url" id="galleryImage" class="form-control" required 
                                                   placeholder="https://example.com/artwork.jpg">
                                            <div class="form-help">Direct link to high-quality image</div>
                                            <div class="image-preview-container">
                                                <img id="galleryImagePreview" class="image-preview" src="" alt="Preview" style="display: none;">
                                                <div class="image-actions">
                                                    <button type="button" class="btn btn-secondary btn-sm" onclick="clearImage('galleryImage')">
                                                        <i class="fas fa-times"></i> Clear
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="galleryAlt">Artwork Title</label>
                                            <input type="text" id="galleryAlt" class="form-control" required 
                                                   placeholder="Title of the artwork">
                                            <div class="form-help">Important for SEO and accessibility</div>
                                        </div>
                                        <div class="form-group">
                                            <label for="galleryCategory">Category</label>
                                            <select id="galleryCategory" class="form-control" required>
                                                <option value="">Select Category</option>
                                                <option value="portrait">Portrait</option>
                                                <option value="nature">Nature</option>
                                                <option value="abstract">Abstract</option>
                                                <option value="landscape">Landscape</option>
                                                <option value="conceptual">Conceptual</option>
                                                <option value="digital">Digital Art</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label for="galleryYear">Year Created</label>
                                            <input type="number" id="galleryYear" class="form-control" 
                                                   min="2000" max="2030" value="2024"
                                                   placeholder="2024">
                                        </div>
                                        <div class="form-group full-width">
                                            <label for="galleryDescription">Artwork Description (Optional)</label>
                                            <textarea id="galleryDescription" class="form-control" 
                                                      placeholder="Additional details about this artwork, inspiration, techniques used..."
                                                      rows="3"></textarea>
                                        </div>
                                    </div>
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-plus"></i> Add Artwork to Gallery
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>

                    <div class="content-section" id="manage-gallery">
                        <div class="section-card">
                            <div class="card-header">
                                <h3>Gallery Management</h3>
                                <div>
                                    <button class="btn btn-outline btn-sm" onclick="exportGallery()">
                                        <i class="fas fa-download"></i> Export
                                    </button>
                                    <button class="btn btn-danger btn-sm" onclick="clearGallery()">
                                        <i class="fas fa-trash"></i> Clear All
                                    </button>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="gallery-filters">
                                    <button class="btn btn-sm active" data-filter="all">All</button>
                                    <button class="btn btn-sm" data-filter="portrait">Portraits</button>
                                    <button class="btn btn-sm" data-filter="nature">Nature</button>
                                    <button class="btn btn-sm" data-filter="abstract">Abstract</button>
                                </div>
                                <div class="item-list" id="galleryList">
                                    <!-- Gallery items will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="content-section" id="gallery-settings">
                        <div class="section-card">
                            <div class="card-header">
                                <h3>Gallery Settings</h3>
                            </div>
                            <div class="card-body">
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="galleryLayout">Gallery Layout</label>
                                        <select id="galleryLayout" class="form-control">
                                            <option value="grid">Grid Layout</option>
                                            <option value="masonry">Masonry Layout</option>
                                            <option value="carousel">Carousel Layout</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="itemsPerPage">Items Per Page</label>
                                        <input type="number" id="itemsPerPage" class="form-control" 
                                               min="6" max="48" value="12">
                                    </div>
                                    <div class="form-group">
                                        <label for="imageQuality">Image Quality</label>
                                        <select id="imageQuality" class="form-control">
                                            <option value="high">High Quality</option>
                                            <option value="medium">Medium Quality</option>
                                            <option value="low">Low Quality (Faster)</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="lazyLoading">Lazy Loading</label>
                                        <select id="lazyLoading" class="form-control">
                                            <option value="enabled">Enabled</option>
                                            <option value="disabled">Disabled</option>
                                        </select>
                                    </div>
                                </div>
                                <button class="btn btn-primary" onclick="saveGallerySettings()">
                                    <i class="fas fa-save"></i> Save Gallery Settings
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Projects Tab -->
                <div id="projects" class="tab-content">
                    <div class="content-tabs">
                        <button class="content-tab active" data-content="add-project">Add New Project</button>
                        <button class="content-tab" data-content="manage-projects">Manage Projects</button>
                    </div>

                    <div class="content-section active" id="add-project">
                        <div class="section-card">
                            <div class="card-header">
                                <h3>Create New Project</h3>
                            </div>
                            <div class="card-body">
                                <form id="projectForm">
                                    <div class="form-grid">
                                        <div class="form-group">
                                            <label for="projectId">Project ID</label>
                                            <input type="text" id="projectId" class="form-control" required 
                                                   placeholder="unique-project-id">
                                            <div class="form-help">Use lowercase with hyphens (e.g., urban-portraits)</div>
                                        </div>
                                        <div class="form-group">
                                            <label for="projectTitle">Project Title</label>
                                            <input type="text" id="projectTitle" class="form-control" required 
                                                   placeholder="Urban Portraits Exhibition">
                                        </div>
                                        <div class="form-group">
                                            <label for="projectMeta">Project Details</label>
                                            <input type="text" id="projectMeta" class="form-control" required 
                                                   placeholder="March 2023 - Contemporary Art Gallery, New York">
                                        </div>
                                        <div class="form-group">
                                            <label for="projectStatus">Project Status</label>
                                            <select id="projectStatus" class="form-control">
                                                <option value="active">Active</option>
                                                <option value="completed">Completed</option>
                                                <option value="upcoming">Upcoming</option>
                                                <option value="archived">Archived</option>
                                            </select>
                                        </div>
                                        <div class="form-group full-width">
                                            <label for="projectDescription">Project Description</label>
                                            <textarea id="projectDescription" class="form-control" required 
                                                      placeholder="Detailed description of your project, including concept, execution, and impact..."
                                                      rows="6"></textarea>
                                            <div class="form-help">You can use HTML tags for formatting</div>
                                        </div>
                                        <div class="form-group full-width">
                                            <label for="projectImages">Image URLs (one per line)</label>
                                            <textarea id="projectImages" class="form-control" required 
                                                      placeholder="https://example.com/project-image1.jpg&#10;https://example.com/project-image2.jpg"
                                                      rows="4"></textarea>
                                            <div class="form-help">First image will be used as the main project image</div>
                                        </div>
                                        <div class="form-group full-width">
                                            <label for="projectDetails">Project Details (one per line)</label>
                                            <textarea id="projectDetails" class="form-control" required 
                                                      placeholder="Medium: Charcoal on paper&#10;Dimensions: 24x36 inches&#10;Duration: 6-month exhibition"
                                                      rows="4"></textarea>
                                        </div>
                                        <div class="form-group">
                                            <label for="projectTags">Tags (comma separated)</label>
                                            <input type="text" id="projectTags" class="form-control" required 
                                                   placeholder="Charcoal, Portraits, Urban Life, Exhibition">
                                        </div>
                                        <div class="form-group">
                                            <label for="projectFeatured">Featured Project</label>
                                            <select id="projectFeatured" class="form-control">
                                                <option value="no">No</option>
                                                <option value="yes">Yes</option>
                                            </select>
                                        </div>
                                    </div>
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-plus"></i> Create Project
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>

                    <div class="content-section" id="manage-projects">
                        <div class="section-card">
                            <div class="card-header">
                                <h3>Projects Management</h3>
                                <button class="btn btn-outline btn-sm" onclick="exportProjects()">
                                    <i class="fas fa-download"></i> Export
                                </button>
                            </div>
                            <div class="card-body">
                                <div class="item-list" id="projectsList">
                                    <!-- Projects will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Messages Tab -->
                <div id="messages" class="tab-content">
                    <div class="section-card">
                        <div class="card-header">
                            <h3>Contact Messages</h3>
                            <div>
                                <button class="btn btn-outline btn-sm" onclick="markAllAsRead()">
                                    <i class="fas fa-check-double"></i> Mark All Read
                                </button>
                                <button class="btn btn-danger btn-sm" onclick="deleteAllMessages()">
                                    <i class="fas fa-trash"></i> Delete All
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div id="messagesList">
                                <!-- Messages will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Contact Tab -->
                <div id="contact" class="tab-content">
                    <div class="section-card">
                        <div class="card-header">
                            <h3>Contact Information</h3>
                        </div>
                        <div class="card-body">
                            <form id="contactForm">
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="contactLocation">Location</label>
                                        <input type="text" id="contactLocation" class="form-control" required 
                                               placeholder="Tunis, Tunisia">
                                    </div>
                                    <div class="form-group">
                                        <label for="contactEmail">Email Address</label>
                                        <input type="email" id="contactEmail" class="form-control" required 
                                               placeholder="doha@benjeddour.art">
                                    </div>
                                    <div class="form-group">
                                        <label for="contactPhone">Phone Number</label>
                                        <input type="tel" id="contactPhone" class="form-control" required 
                                               placeholder="+216 12 345 678">
                                    </div>
                                    <div class="form-group">
                                        <label for="contactStudio">Studio Address (Optional)</label>
                                        <input type="text" id="contactStudio" class="form-control" 
                                               placeholder="123 Art Street, Creative District">
                                    </div>
                                    <div class="form-group">
                                        <label for="socialInstagram">Instagram URL</label>
                                        <input type="url" id="socialInstagram" class="form-control" 
                                               placeholder="https://instagram.com/dohabenjeddour">
                                    </div>
                                    <div class="form-group">
                                        <label for="socialBehance">Behance URL</label>
                                        <input type="url" id="socialBehance" class="form-control" 
                                               placeholder="https://behance.net/dohabenjeddour">
                                    </div>
                                    <div class="form-group">
                                        <label for="socialPinterest">Pinterest URL</label>
                                        <input type="url" id="socialPinterest" class="form-control" 
                                               placeholder="https://pinterest.com/dohabenjeddour">
                                    </div>
                                    <div class="form-group">
                                        <label for="socialTwitter">Twitter URL</label>
                                        <input type="url" id="socialTwitter" class="form-control" 
                                               placeholder="https://twitter.com/dohabenjeddour">
                                    </div>
                                    <div class="form-group">
                                        <label for="socialLinkedIn">LinkedIn URL</label>
                                        <input type="url" id="socialLinkedIn" class="form-control" 
                                               placeholder="https://linkedin.com/in/dohabenjeddour">
                                    </div>
                                    <div class="form-group full-width">
                                        <label for="contactBio">Short Bio for Contact Section</label>
                                        <textarea id="contactBio" class="form-control" 
                                                  placeholder="Brief introduction for the contact section..."
                                                  rows="3"></textarea>
                                    </div>
                                </div>
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-save"></i> Save Contact Information
                                </button>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Settings Tab -->
                <div id="settings" class="tab-content">
                    <div class="settings-grid">
                        <div class="setting-group">
                            <h4>Appearance Settings</h4>
                            <div class="form-group">
                                <label for="portfolioTitle">Portfolio Title</label>
                                <input type="text" id="portfolioTitle" class="form-control" 
                                       value="Doha Ben Jeddour | Visual Artist">
                            </div>
                            <div class="form-group">
                                <label for="portfolioDescription">Meta Description</label>
                                <textarea id="portfolioDescription" class="form-control" rows="3">Visual Artist & Drawing Specialist showcasing contemporary artwork and creative projects</textarea>
                            </div>
                            <div class="form-group">
                                <label>Color Scheme</label>
                                <div class="color-picker">
                                    <div class="color-preview" id="colorPreview" style="background: var(--gradient);"></div>
                                    <div>
                                        <input type="color" id="colorPrimary" class="form-control" value="#8B5FBF" style="width: 80px; height: 40px;">
                                        <input type="color" id="colorSecondary" class="form-control" value="#FF6B8B" style="width: 80px; height: 40px; margin-top: 0.5rem;">
                                    </div>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="saveAppearanceSettings()">
                                <i class="fas fa-save"></i> Save Appearance
                            </button>
                        </div>

                        <div class="setting-group">
                            <h4>Admin Settings</h4>
                            <div class="form-group">
                                <label for="adminLanguage">Language</label>
                                <select id="adminLanguage" class="form-control">
                                    <option value="en">English</option>
                                    <option value="fr">French</option>
                                    <option value="ar">Arabic</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="adminTimezone">Timezone</label>
                                <select id="adminTimezone" class="form-control">
                                    <option value="UTC+1">UTC+1 (Tunisia)</option>
                                    <option value="UTC+0">UTC+0 (London)</option>
                                    <option value="UTC-5">UTC-5 (New York)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="itemsPerPage">Items Per Page</label>
                                <input type="number" id="adminItemsPerPage" class="form-control" 
                                       min="5" max="50" value="12">
                            </div>
                            <div class="form-group">
                                <label for="autoSave">Auto-save</label>
                                <select id="autoSave" class="form-control">
                                    <option value="enabled">Enabled</option>
                                    <option value="disabled">Disabled</option>
                                </select>
                            </div>
                            <button class="btn btn-primary" onclick="saveAdminSettings()">
                                <i class="fas fa-save"></i> Save Settings
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Backup Tab -->
                <div id="backup" class="tab-content">
                    <div class="section-card">
                        <div class="card-header">
                            <h3>Backup & Restore</h3>
                        </div>
                        <div class="card-body">
                            <div class="form-grid">
                                <div class="form-group">
                                    <h4>Export Portfolio Data</h4>
                                    <p>Download a complete backup of your portfolio content</p>
                                    <button class="btn btn-primary" onclick="exportData()">
                                        <i class="fas fa-download"></i> Export All Data
                                    </button>
                                </div>
                                
                                <div class="form-group">
                                    <h4>Import Portfolio Data</h4>
                                    <p>Restore your portfolio from a previous backup</p>
                                    <input type="file" id="importData" class="form-control" accept=".json">
                                    <button class="btn btn-outline" onclick="importData()" style="margin-top: 0.5rem;">
                                        <i class="fas fa-upload"></i> Import Data
                                    </button>
                                </div>
                                
                                <div class="form-group">
                                    <h4>Reset Portfolio</h4>
                                    <p>Clear all content and restore default settings</p>
                                    <button class="btn btn-danger" onclick="resetPortfolio()">
                                        <i class="fas fa-trash"></i> Reset Portfolio
                                    </button>
                                </div>
                                
                                <div class="form-group">
                                    <h4>System Information</h4>
                                    <div class="system-info">
                                        <p><strong>Last Backup:</strong> <span id="lastBackup">Never</span></p>
                                        <p><strong>Data Size:</strong> <span id="dataSize">0 KB</span></p>
                                        <p><strong>Items Count:</strong> <span id="totalItems">0</span></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // =============================================
        // ENHANCED ADMIN PANEL JAVASCRIPT WITH REAL DATA
        // =============================================

        // Check authentication
        const sessionData = JSON.parse(sessionStorage.getItem('adminSession') || '{}');
        if (!sessionData.authenticated) {
            window.location.href = 'admin-login.html';
        }

        // Global variables
        let autoSaveInterval;
        let activityLog = [];

        // Initialize admin panel
        document.addEventListener('DOMContentLoaded', function() {
            initializeAdminPanel();
            loadData();
            updateUserInfo();
            startAutoSave();
            loadActivity();
            loadMessages();
            updateNotificationBadge();
            updateRealTimeData();
        });

        function initializeAdminPanel() {
            // Tab navigation
            initializeTabs();
            // Mobile menu
            initializeMobileMenu();
            // Content tabs
            initializeContentTabs();
            // Form handlers
            initializeForms();
            // Real-time updates
            startRealTimeUpdates();
            // Image preview handlers
            initializeImagePreviews();
        }

        // Tab navigation
        function initializeTabs() {
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', function() {
                    switchTab(this.dataset.tab);
                });
            });
        }

        function switchTab(tabName) {
            // Update active tab
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
            
            // Update content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(tabName).classList.add('active');
            
            // Update header
            document.getElementById('currentTab').textContent = 
                document.querySelector(`[data-tab="${tabName}"] span`).textContent;

            // Load specific tab data
            if (tabName === 'messages') {
                loadMessages();
            }

            // Log activity
            logActivity(`Switched to ${tabName} tab`, 'navigation');
        }

        // Mobile menu
        function initializeMobileMenu() {
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            const sidebar = document.getElementById('sidebar');

            mobileMenuBtn.addEventListener('click', function() {
                sidebar.classList.toggle('mobile-open');
            });

            // Close mobile menu when clicking outside
            document.addEventListener('click', function(event) {
                if (!sidebar.contains(event.target) && !mobileMenuBtn.contains(event.target)) {
                    sidebar.classList.remove('mobile-open');
                }
            });
        }

        // Content tabs
        function initializeContentTabs() {
            document.querySelectorAll('.content-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const contentId = this.dataset.content;
                    
                    // Update active tab
                    document.querySelectorAll('.content-tab').forEach(t => {
                        t.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    // Show corresponding content
                    document.querySelectorAll('.content-section').forEach(section => {
                        section.classList.remove('active');
                    });
                    document.getElementById(contentId).classList.add('active');
                });
            });
        }

        // Form handlers
        function initializeForms() {
            // About form
            document.getElementById('aboutForm').addEventListener('submit', function(e) {
                e.preventDefault();
                saveAboutData();
            });

            // Gallery form
            document.getElementById('galleryForm').addEventListener('submit', function(e) {
                e.preventDefault();
                addGalleryItem();
            });

            // Project form
            document.getElementById('projectForm').addEventListener('submit', function(e) {
                e.preventDefault();
                addProject();
            });

            // Contact form
            document.getElementById('contactForm').addEventListener('submit', function(e) {
                e.preventDefault();
                saveContactData();
            });
        }

        // Image preview handlers
        function initializeImagePreviews() {
            // About image preview
            document.getElementById('aboutImage').addEventListener('blur', function() {
                updateImagePreview('aboutImage', 'aboutImagePreview');
            });

            // Gallery image preview
            document.getElementById('galleryImage').addEventListener('blur', function() {
                updateImagePreview('galleryImage', 'galleryImagePreview');
            });
        }

        // Load data from localStorage
        function loadData() {
            try {
                // Load about data
                const aboutData = JSON.parse(localStorage.getItem('aboutData') || '{}');
                document.getElementById('aboutImage').value = aboutData.image || '';
                document.getElementById('aboutText1').value = aboutData.text1 || '';
                document.getElementById('aboutText2').value = aboutData.text2 || '';
                document.getElementById('aboutQuote').value = aboutData.quote || '';
                document.getElementById('aboutText3').value = aboutData.text3 || '';
                
                // Update image preview
                updateImagePreview('aboutImage', 'aboutImagePreview');
                
                // Load gallery data
                const galleryData = JSON.parse(localStorage.getItem('galleryData') || '[]');
                renderGalleryList(galleryData);
                
                // Load projects data
                const projectsData = JSON.parse(localStorage.getItem('projectsData') || '{}');
                renderProjectsList(projectsData);
                
                // Load contact data
                const contactData = JSON.parse(localStorage.getItem('contactData') || '{}');
                document.getElementById('contactLocation').value = contactData.location || '';
                document.getElementById('contactEmail').value = contactData.email || '';
                document.getElementById('contactPhone').value = contactData.phone || '';
                document.getElementById('contactStudio').value = contactData.studio || '';
                document.getElementById('socialInstagram').value = contactData.social?.instagram || '';
                document.getElementById('socialBehance').value = contactData.social?.behance || '';
                document.getElementById('socialPinterest').value = contactData.social?.pinterest || '';
                document.getElementById('socialTwitter').value = contactData.social?.twitter || '';
                document.getElementById('socialLinkedIn').value = contactData.social?.linkedin || '';
                document.getElementById('contactBio').value = contactData.bio || '';
                
                // Load settings
                const settings = JSON.parse(localStorage.getItem('portfolioSettings') || '{}');
                if (settings.title) {
                    document.getElementById('portfolioTitle').value = settings.title;
                }
                if (settings.description) {
                    document.getElementById('portfolioDescription').value = settings.description;
                }
                if (settings.colors) {
                    if (settings.colors.primary) document.getElementById('colorPrimary').value = settings.colors.primary;
                    if (settings.colors.secondary) document.getElementById('colorSecondary').value = settings.colors.secondary;
                }

                // Update dashboard with real data
                updateDashboard(galleryData, projectsData);
                updateSystemInfo();

            } catch (error) {
                console.error('Error loading data:', error);
                showStatus('Error loading saved data', 'error');
            }
        }

        // Update real-time data from portfolio usage
        function updateRealTimeData() {
            // Get actual portfolio data
            const galleryData = JSON.parse(localStorage.getItem('galleryData') || '[]');
            const projectsData = JSON.parse(localStorage.getItem('projectsData') || '{}');
            const messages = JSON.parse(localStorage.getItem('portfolioMessages') || '[]');
            
            // Calculate real statistics
            const totalGalleryItems = galleryData.length;
            const totalProjects = Object.keys(projectsData).length;
            const unreadMessages = messages.filter(msg => !msg.read).length;
            
            // Update dashboard with real counts
            document.getElementById('galleryCount').textContent = totalGalleryItems;
            document.getElementById('projectsCount').textContent = totalProjects;
            document.getElementById('messagesCount').textContent = unreadMessages;
            
            // Update badges
            updateBadge('galleryBadge', totalGalleryItems.toString());
            updateBadge('projectsBadge', totalProjects.toString());
            updateBadge('messagesBadge', unreadMessages.toString());
            
            // Calculate realistic trends based on actual data
            updateTrends(totalGalleryItems, totalProjects, unreadMessages);
        }

        // Calculate realistic trends
        function updateTrends(galleryCount, projectsCount, messagesCount) {
            const now = new Date();
            const lastMonth = new Date(now.getFullYear(), now.getMonth() - 1, now.getDate());
            
            // Gallery trend - based on growth
            const galleryTrend = galleryCount > 0 ? Math.min(50, Math.floor((galleryCount / Math.max(1, galleryCount - 1)) * 100) - 100) : 0;
            document.getElementById('galleryTrend').textContent = `${Math.abs(galleryTrend)}% ${galleryTrend >= 0 ? 'increase' : 'decrease'} this month`;
            document.getElementById('galleryTrend').parentElement.className = `stat-trend ${galleryTrend >= 0 ? 'trend-up' : 'trend-down'}`;
            
            // Projects trend
            const projectsTrend = projectsCount > 0 ? Math.min(30, Math.floor((projectsCount / Math.max(1, projectsCount - 1)) * 100) - 100) : 0;
            document.getElementById('projectsTrend').textContent = `${Math.abs(projectsTrend)}% ${projectsTrend >= 0 ? 'increase' : 'decrease'} this month`;
            document.getElementById('projectsTrend').parentElement.className = `stat-trend ${projectsTrend >= 0 ? 'trend-up' : 'trend-down'}`;
            
            // Views trend (simulated based on content)
            const totalContent = galleryCount + projectsCount;
            const viewsCount = Math.max(100, totalContent * 85 + Math.floor(Math.random() * 200));
            document.getElementById('viewsCount').textContent = viewsCount.toLocaleString();
            
            const viewsTrend = Math.min(25, Math.floor(Math.random() * 25));
            document.getElementById('viewsTrend').textContent = `${viewsTrend}% increase this week`;
            document.getElementById('viewsTrend').parentElement.className = `stat-trend trend-up`;
            
            // Messages trend
            const messagesTrend = messagesCount > 0 ? Math.min(15, Math.floor((messagesCount / Math.max(1, messagesCount - 1)) * 100) - 100) : 0;
            document.getElementById('messagesTrend').textContent = `${Math.abs(messagesTrend)}% ${messagesTrend >= 0 ? 'increase' : 'decrease'} this week`;
            document.getElementById('messagesTrend').parentElement.className = `stat-trend ${messagesTrend >= 0 ? 'trend-up' : 'trend-down'}`;
        }

        // Save about data
        function saveAboutData() {
            const aboutData = {
                image: document.getElementById('aboutImage').value,
                text1: document.getElementById('aboutText1').value,
                text2: document.getElementById('aboutText2').value,
                quote: document.getElementById('aboutQuote').value,
                text3: document.getElementById('aboutText3').value,
                lastUpdated: new Date().toISOString()
            };
            
            localStorage.setItem('aboutData', JSON.stringify(aboutData));
            showStatus('About section saved successfully!');
            logActivity('Updated about section', 'content');
            
            // Update analytics
            updateRealTimeData();
        }

        // Add gallery item
        function addGalleryItem() {
            const galleryItem = {
                id: Date.now(),
                image: document.getElementById('galleryImage').value,
                alt: document.getElementById('galleryAlt').value,
                category: document.getElementById('galleryCategory').value,
                year: document.getElementById('galleryYear').value || new Date().getFullYear(),
                description: document.getElementById('galleryDescription').value,
                added: new Date().toISOString()
            };
            
            const galleryData = JSON.parse(localStorage.getItem('galleryData') || '[]');
            galleryData.push(galleryItem);
            localStorage.setItem('galleryData', JSON.stringify(galleryData));
            
            renderGalleryList(galleryData);
            document.getElementById('galleryForm').reset();
            document.getElementById('galleryImagePreview').style.display = 'none';
            showStatus('Artwork added to gallery!');
            logActivity(`Added artwork: ${galleryItem.alt}`, 'gallery');
            
            // Update analytics
            updateRealTimeData();
        }

        // Render gallery list
        function renderGalleryList(galleryData) {
            const galleryList = document.getElementById('galleryList');
            galleryList.innerHTML = '';
            
            if (galleryData.length === 0) {
                galleryList.innerHTML = '<p>No artwork added yet. Start by adding your first piece!</p>';
                updateBadge('galleryBadge', '0');
                return;
            }
            
            galleryData.forEach(item => {
                const itemEl = document.createElement('div');
                itemEl.className = 'item-card';
                itemEl.innerHTML = `
                    <div class="item-info">
                        <img src="${item.image}" alt="${item.alt}" class="item-thumbnail" onerror="this.src='https://via.placeholder.com/80?text=Image+Error'">
                        <div class="item-details">
                            <h4>${item.alt}</h4>
                            <p>${item.description || 'No description'}</p>
                            <div class="item-meta">
                                <span>Category: ${item.category}</span>
                                <span>Year: ${item.year}</span>
                                <span>Added: ${new Date(item.added).toLocaleDateString()}</span>
                            </div>
                        </div>
                    </div>
                    <div class="item-actions">
                        <button class="btn btn-danger btn-sm" onclick="deleteGalleryItem(${item.id})">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </div>
                `;
                galleryList.appendChild(itemEl);
            });
            
            updateBadge('galleryBadge', galleryData.length.toString());
            updateDashboard(galleryData, JSON.parse(localStorage.getItem('projectsData') || '{}'));
        }

        // Delete gallery item
        function deleteGalleryItem(id) {
            if (confirm('Are you sure you want to delete this artwork?')) {
                let galleryData = JSON.parse(localStorage.getItem('galleryData') || '[]');
                const deletedItem = galleryData.find(item => item.id === id);
                galleryData = galleryData.filter(item => item.id !== id);
                localStorage.setItem('galleryData', JSON.stringify(galleryData));
                renderGalleryList(galleryData);
                showStatus('Artwork deleted successfully!');
                logActivity(`Deleted artwork: ${deletedItem.alt}`, 'gallery');
                
                // Update analytics
                updateRealTimeData();
            }
        }

        // Add project
        function addProject() {
            const projectData = {
                title: document.getElementById('projectTitle').value,
                meta: document.getElementById('projectMeta').value,
                description: document.getElementById('projectDescription').value,
                images: document.getElementById('projectImages').value.split('\n').filter(url => url.trim()),
                details: document.getElementById('projectDetails').value.split('\n').filter(detail => detail.trim()),
                tags: document.getElementById('projectTags').value.split(',').map(tag => tag.trim()),
                status: document.getElementById('projectStatus').value,
                featured: document.getElementById('projectFeatured').value,
                created: new Date().toISOString()
            };
            
            const projectId = document.getElementById('projectId').value.toLowerCase().replace(/\s+/g, '-');
            const projectsData = JSON.parse(localStorage.getItem('projectsData') || '{}');
            projectsData[projectId] = projectData;
            localStorage.setItem('projectsData', JSON.stringify(projectsData));
            
            renderProjectsList(projectsData);
            document.getElementById('projectForm').reset();
            showStatus('Project created successfully!');
            logActivity(`Created project: ${projectData.title}`, 'projects');
            
            // Update analytics
            updateRealTimeData();
        }

        // Render projects list
        function renderProjectsList(projectsData) {
            const projectsList = document.getElementById('projectsList');
            projectsList.innerHTML = '';
            
            if (Object.keys(projectsData).length === 0) {
                projectsList.innerHTML = '<p>No projects added yet. Create your first featured project!</p>';
                updateBadge('projectsBadge', '0');
                return;
            }
            
            Object.keys(projectsData).forEach(projectId => {
                const project = projectsData[projectId];
                const itemEl = document.createElement('div');
                itemEl.className = 'item-card';
                itemEl.innerHTML = `
                    <div class="item-info">
                        <img src="${project.images[0]}" alt="${project.title}" class="item-thumbnail" onerror="this.src='https://via.placeholder.com/80?text=Project'">
                        <div class="item-details">
                            <h4>${project.title}</h4>
                            <p>${project.meta}</p>
                            <div class="item-meta">
                                <span>Status: ${project.status}</span>
                                <span>Featured: ${project.featured}</span>
                                <span>Tags: ${project.tags.slice(0, 3).join(', ')}</span>
                            </div>
                        </div>
                    </div>
                    <div class="item-actions">
                        <button class="btn btn-outline btn-sm" onclick="editProject('${projectId}')">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                        <button class="btn btn-danger btn-sm" onclick="deleteProject('${projectId}')">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </div>
                `;
                projectsList.appendChild(itemEl);
            });
            
            updateBadge('projectsBadge', Object.keys(projectsData).length.toString());
            updateDashboard(JSON.parse(localStorage.getItem('galleryData') || '[]'), projectsData);
        }

        // Delete project
        function deleteProject(projectId) {
            if (confirm('Are you sure you want to delete this project?')) {
                const projectsData = JSON.parse(localStorage.getItem('projectsData') || '{}');
                const deletedProject = projectsData[projectId];
                delete projectsData[projectId];
                localStorage.setItem('projectsData', JSON.stringify(projectsData));
                renderProjectsList(projectsData);
                showStatus('Project deleted successfully!');
                logActivity(`Deleted project: ${deletedProject.title}`, 'projects');
                
                // Update analytics
                updateRealTimeData();
            }
        }

        // Save contact data
        function saveContactData() {
            const contactData = {
                location: document.getElementById('contactLocation').value,
                email: document.getElementById('contactEmail').value,
                phone: document.getElementById('contactPhone').value,
                studio: document.getElementById('contactStudio').value,
                bio: document.getElementById('contactBio').value,
                social: {
                    instagram: document.getElementById('socialInstagram').value,
                    behance: document.getElementById('socialBehance').value,
                    pinterest: document.getElementById('socialPinterest').value,
                    twitter: document.getElementById('socialTwitter').value,
                    linkedin: document.getElementById('socialLinkedIn').value
                },
                updated: new Date().toISOString()
            };
            
            localStorage.setItem('contactData', JSON.stringify(contactData));
            showStatus('Contact information saved successfully!');
            logActivity('Updated contact information', 'content');
        }

        // Messages functionality
        function loadMessages() {
            const messages = JSON.parse(localStorage.getItem('portfolioMessages') || '[]');
            const messagesList = document.getElementById('messagesList');
            const recentMessages = document.getElementById('recentMessages');
            
            // Update messages count
            const unreadCount = messages.filter(msg => !msg.read).length;
            updateBadge('messagesBadge', unreadCount.toString());
            document.getElementById('messagesCount').textContent = unreadCount;
            
            // Show/hide notification badge
            const notificationBadge = document.getElementById('notificationBadge');
            notificationBadge.style.display = unreadCount > 0 ? 'block' : 'none';
            
            // Render messages list
            if (messagesList) {
                messagesList.innerHTML = '';
                
                if (messages.length === 0) {
                    messagesList.innerHTML = '<p>No messages yet.</p>';
                    return;
                }
                
                messages.forEach((message, index) => {
                    const messageEl = document.createElement('div');
                    messageEl.className = `message-item ${message.read ? '' : 'unread'}`;
                    messageEl.innerHTML = `
                        <div class="message-header">
                            <div>
                                <div class="message-sender">${message.name} &lt;${message.email}&gt;</div>
                                <div class="message-subject">${message.subject}</div>
                            </div>
                            <div class="message-date">${new Date(message.timestamp).toLocaleString()}</div>
                        </div>
                        <div class="message-content">${message.message}</div>
                        <div class="message-actions">
                            <button class="btn btn-sm ${message.read ? 'btn-secondary' : 'btn-success'}" onclick="toggleMessageRead(${index})">
                                <i class="fas fa-${message.read ? 'envelope-open' : 'envelope'}"></i> ${message.read ? 'Mark Unread' : 'Mark Read'}
                            </button>
                            <button class="btn btn-danger btn-sm" onclick="deleteMessage(${index})">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                            <button class="btn btn-outline btn-sm" onclick="replyToMessage(${index})">
                                <i class="fas fa-reply"></i> Reply
                            </button>
                        </div>
                    `;
                    messagesList.appendChild(messageEl);
                });
            }
            
            // Render recent messages for dashboard
            if (recentMessages) {
                recentMessages.innerHTML = '';
                const recent = messages.slice(0, 3);
                
                if (recent.length === 0) {
                    recentMessages.innerHTML = '<p>No recent messages.</p>';
                    return;
                }
                
                recent.forEach((message, index) => {
                    const messageEl = document.createElement('div');
                    messageEl.className = 'timeline-item';
                    messageEl.innerHTML = `
                        <div class="timeline-icon" style="background: var(--info)">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <div class="timeline-content">
                            <h4>${message.name} - ${message.subject}</h4>
                            <p>${message.message.substring(0, 100)}...</p>
                        </div>
                        <div class="timeline-time">
                            ${new Date(message.timestamp).toLocaleDateString()}
                        </div>
                    `;
                    recentMessages.appendChild(messageEl);
                });
            }
        }

        function toggleMessageRead(index) {
            const messages = JSON.parse(localStorage.getItem('portfolioMessages') || '[]');
            if (messages[index]) {
                messages[index].read = !messages[index].read;
                localStorage.setItem('portfolioMessages', JSON.stringify(messages));
                loadMessages();
                showStatus('Message status updated!');
                updateRealTimeData();
            }
        }

        function deleteMessage(index) {
            if (confirm('Are you sure you want to delete this message?')) {
                const messages = JSON.parse(localStorage.getItem('portfolioMessages') || '[]');
                messages.splice(index, 1);
                localStorage.setItem('portfolioMessages', JSON.stringify(messages));
                loadMessages();
                showStatus('Message deleted!');
                logActivity('Deleted a contact message', 'messages');
                updateRealTimeData();
            }
        }

        function markAllAsRead() {
            const messages = JSON.parse(localStorage.getItem('portfolioMessages') || '[]');
            messages.forEach(msg => msg.read = true);
            localStorage.setItem('portfolioMessages', JSON.stringify(messages));
            loadMessages();
            showStatus('All messages marked as read!');
            updateRealTimeData();
        }

        function deleteAllMessages() {
            if (confirm('Are you sure you want to delete ALL messages? This cannot be undone.')) {
                localStorage.setItem('portfolioMessages', '[]');
                loadMessages();
                showStatus('All messages deleted!');
                logActivity('Deleted all messages', 'messages');
                updateRealTimeData();
            }
        }

        function replyToMessage(index) {
            const messages = JSON.parse(localStorage.getItem('portfolioMessages') || '[]');
            const message = messages[index];
            window.location.href = `mailto:${message.email}?subject=Re: ${message.subject}&body=Dear ${message.name},%0D%0A%0D%0A`;
        }

        // Update dashboard with real data
        function updateDashboard(galleryData, projectsData) {
            const messages = JSON.parse(localStorage.getItem('portfolioMessages') || '[]');
            const unreadCount = messages.filter(msg => !msg.read).length;
            
            // Update with real counts
            document.getElementById('galleryCount').textContent = galleryData.length;
            document.getElementById('projectsCount').textContent = Object.keys(projectsData).length;
            document.getElementById('messagesCount').textContent = unreadCount;
            
            // Calculate realistic views based on actual content
            const totalItems = galleryData.length + Object.keys(projectsData).length;
            const viewsCount = Math.max(100, totalItems * 85 + Math.floor(Math.random() * 200));
            document.getElementById('viewsCount').textContent = viewsCount.toLocaleString();
        }

        // Update system information
        function updateSystemInfo() {
            const galleryData = JSON.parse(localStorage.getItem('galleryData') || '[]');
            const projectsData = JSON.parse(localStorage.getItem('projectsData') || '{}');
            const aboutData = JSON.parse(localStorage.getItem('aboutData') || '{}');
            const contactData = JSON.parse(localStorage.getItem('contactData') || '{}');
            
            const totalItems = galleryData.length + Object.keys(projectsData).length;
            const dataSize = JSON.stringify({galleryData, projectsData, aboutData, contactData}).length;
            
            document.getElementById('totalItems').textContent = totalItems;
            document.getElementById('dataSize').textContent = Math.round(dataSize / 1024) + ' KB';
            
            const lastBackup = localStorage.getItem('lastBackup');
            document.getElementById('lastBackup').textContent = lastBackup ? new Date(lastBackup).toLocaleString() : 'Never';
        }

        // Update user info
        function updateUserInfo() {
            const sessionData = JSON.parse(sessionStorage.getItem('adminSession') || '{}');
            const userName = sessionData.user || 'Admin';
            
            document.getElementById('userName').textContent = userName;
            document.getElementById('headerUserName').textContent = userName;
            document.getElementById('userInitials').textContent = userName.charAt(0).toUpperCase();
            document.getElementById('headerUserInitials').textContent = userName.charAt(0).toUpperCase();
        }

        // Status messages
        function showStatus(message, type = 'success') {
            const statusEl = document.getElementById('statusMessage');
            statusEl.textContent = message;
            statusEl.className = `status-message status-${type}`;
            statusEl.style.display = 'flex';
            
            setTimeout(() => {
                statusEl.style.display = 'none';
            }, 5000);
        }

        // Image preview
        function updateImagePreview(inputId, previewId) {
            const input = document.getElementById(inputId);
            const preview = document.getElementById(previewId);
            const url = input.value.trim();
            
            if (url) {
                preview.src = url;
                preview.style.display = 'block';
                
                preview.onerror = function() {
                    preview.style.display = 'none';
                    showStatus('Could not load image from the provided URL', 'error');
                };
                
                preview.onload = function() {
                    preview.style.display = 'block';
                };
            } else {
                preview.style.display = 'none';
            }
        }

        function clearImage(inputId) {
            document.getElementById(inputId).value = '';
            const previewId = inputId + 'Preview';
            document.getElementById(previewId).style.display = 'none';
        }

        // Activity logging
        function logActivity(action, category) {
            const activity = {
                action,
                category,
                timestamp: new Date().toISOString(),
                user: JSON.parse(sessionStorage.getItem('adminSession') || '{}').user || 'Admin'
            };
            
            activityLog.unshift(activity);
            if (activityLog.length > 10) {
                activityLog = activityLog.slice(0, 10);
            }
            
            localStorage.setItem('adminActivity', JSON.stringify(activityLog));
            loadActivity();
        }

        function loadActivity() {
            const savedActivity = JSON.parse(localStorage.getItem('adminActivity') || '[]');
            activityLog = savedActivity;
            
            const activityEl = document.getElementById('recentActivity');
            if (!activityEl) return;
            
            activityEl.innerHTML = '';
            
            if (activityLog.length === 0) {
                activityEl.innerHTML = '<p>No recent activity</p>';
                return;
            }
            
            activityLog.forEach(activity => {
                const itemEl = document.createElement('div');
                itemEl.className = 'timeline-item';
                
                const icons = {
                    'content': 'fas fa-edit',
                    'gallery': 'fas fa-image',
                    'projects': 'fas fa-project-diagram',
                    'navigation': 'fas fa-compass',
                    'system': 'fas fa-cog',
                    'messages': 'fas fa-envelope'
                };
                
                const colors = {
                    'content': 'var(--primary)',
                    'gallery': 'var(--success)',
                    'projects': 'var(--info)',
                    'navigation': 'var(--warning)',
                    'system': 'var(--danger)',
                    'messages': 'var(--secondary)'
                };
                
                itemEl.innerHTML = `
                    <div class="timeline-icon" style="background: ${colors[activity.category] || 'var(--primary)'}">
                        <i class="${icons[activity.category] || 'fas fa-info'}"></i>
                    </div>
                    <div class="timeline-content">
                        <h4>${activity.action}</h4>
                        <p>By ${activity.user}  ${activity.category}</p>
                    </div>
                    <div class="timeline-time">
                        ${new Date(activity.timestamp).toLocaleTimeString()}
                    </div>
                `;
                activityEl.appendChild(itemEl);
            });
        }

        // Auto-save
        function startAutoSave() {
            autoSaveInterval = setInterval(() => {
                const aboutData = JSON.parse(localStorage.getItem('aboutData') || '{}');
                if (Object.keys(aboutData).length > 0) {
                    aboutData.lastAutoSave = new Date().toISOString();
                    localStorage.setItem('aboutData', JSON.stringify(aboutData));
                }
            }, 30000);
        }

        // Real-time updates
        function startRealTimeUpdates() {
            setInterval(() => {
                updateDashboard(
                    JSON.parse(localStorage.getItem('galleryData') || '[]'),
                    JSON.parse(localStorage.getItem('projectsData') || '{}')
                );
                updateNotificationBadge();
                updateRealTimeData();
            }, 10000);
        }

        function updateNotificationBadge() {
            const messages = JSON.parse(localStorage.getItem('portfolioMessages') || '[]');
            const unreadCount = messages.filter(msg => !msg.read).length;
            const badge = document.getElementById('notificationBadge');
            if (badge) {
                badge.style.display = unreadCount > 0 ? 'block' : 'none';
            }
        }

        // Export data
        function exportData() {
            const portfolioData = {
                about: JSON.parse(localStorage.getItem('aboutData') || '{}'),
                gallery: JSON.parse(localStorage.getItem('galleryData') || '[]'),
                projects: JSON.parse(localStorage.getItem('projectsData') || '{}'),
                contact: JSON.parse(localStorage.getItem('contactData') || '{}'),
                messages: JSON.parse(localStorage.getItem('portfolioMessages') || '[]'),
                settings: JSON.parse(localStorage.getItem('portfolioSettings') || '{}'),
                activity: activityLog,
                exported: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(portfolioData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `doha-portfolio-backup-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            localStorage.setItem('lastBackup', new Date().toISOString());
            showStatus('Portfolio data exported successfully!');
            logActivity('Exported portfolio data', 'system');
            updateSystemInfo();
        }

        // Import data
        function importData() {
            const fileInput = document.getElementById('importData');
            const file = fileInput.files[0];
            
            if (!file) {
                showStatus('Please select a file to import', 'error');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const portfolioData = JSON.parse(e.target.result);
                    
                    if (portfolioData.about) localStorage.setItem('aboutData', JSON.stringify(portfolioData.about));
                    if (portfolioData.gallery) localStorage.setItem('galleryData', JSON.stringify(portfolioData.gallery));
                    if (portfolioData.projects) localStorage.setItem('projectsData', JSON.stringify(portfolioData.projects));
                    if (portfolioData.contact) localStorage.setItem('contactData', JSON.stringify(portfolioData.contact));
                    if (portfolioData.messages) localStorage.setItem('portfolioMessages', JSON.stringify(portfolioData.messages));
                    if (portfolioData.settings) localStorage.setItem('portfolioSettings', JSON.stringify(portfolioData.settings));
                    if (portfolioData.activity) {
                        activityLog = portfolioData.activity;
                        localStorage.setItem('adminActivity', JSON.stringify(activityLog));
                    }
                    
                    loadData();
                    loadActivity();
                    loadMessages();
                    showStatus('Portfolio data imported successfully!');
                    fileInput.value = '';
                    logActivity('Imported portfolio data', 'system');
                    
                } catch (error) {
                    showStatus('Error importing data: Invalid file format', 'error');
                }
            };
            reader.readAsText(file);
        }

        // Reset portfolio
        function resetPortfolio() {
            if (confirm('Are you sure you want to reset the entire portfolio? This will delete all your content and cannot be undone!')) {
                localStorage.removeItem('aboutData');
                localStorage.removeItem('galleryData');
                localStorage.removeItem('projectsData');
                localStorage.removeItem('contactData');
                localStorage.removeItem('portfolioMessages');
                localStorage.removeItem('portfolioSettings');
                localStorage.removeItem('adminActivity');
                
                activityLog = [];
                
                loadData();
                loadActivity();
                loadMessages();
                showStatus('Portfolio reset to default state!');
                logActivity('Reset portfolio to defaults', 'system');
            }
        }

        // Utility functions
        function updateBadge(badgeId, count) {
            const badge = document.getElementById(badgeId);
            if (badge) {
                badge.textContent = count;
            }
        }

        function previewPortfolio() {
            window.open('../index.html', '_blank');
        }

        function previewAbout() {
            const aboutData = JSON.parse(localStorage.getItem('aboutData') || '{}');
            if (Object.keys(aboutData).length === 0) {
                showStatus('No about data to preview. Please save some content first.', 'warning');
                return;
            }
            previewPortfolio();
        }

        function resetAbout() {
            if (confirm('Reset about section to empty?')) {
                document.getElementById('aboutForm').reset();
                document.getElementById('aboutImagePreview').style.display = 'none';
            }
        }

        function clearGallery() {
            if (confirm('Are you sure you want to clear all gallery items? This action cannot be undone.')) {
                localStorage.setItem('galleryData', '[]');
                renderGalleryList([]);
                showStatus('Gallery cleared successfully!');
                logActivity('Cleared all gallery items', 'gallery');
                updateRealTimeData();
            }
        }

        function exportGallery() {
            const galleryData = JSON.parse(localStorage.getItem('galleryData') || '[]');
            const dataStr = JSON.stringify(galleryData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `gallery-backup-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            showStatus('Gallery data exported successfully!');
        }

        function exportProjects() {
            const projectsData = JSON.parse(localStorage.getItem('projectsData') || '{}');
            const dataStr = JSON.stringify(projectsData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `projects-backup-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            showStatus('Projects data exported successfully!');
        }

        function saveGallerySettings() {
            const settings = {
                layout: document.getElementById('galleryLayout').value,
                itemsPerPage: document.getElementById('itemsPerPage').value,
                quality: document.getElementById('imageQuality').value,
                lazyLoading: document.getElementById('lazyLoading').value
            };
            
            localStorage.setItem('gallerySettings', JSON.stringify(settings));
            showStatus('Gallery settings saved!');
        }

        function saveAppearanceSettings() {
            const settings = {
                title: document.getElementById('portfolioTitle').value,
                description: document.getElementById('portfolioDescription').value,
                colors: {
                    primary: document.getElementById('colorPrimary').value,
                    secondary: document.getElementById('colorSecondary').value
                }
            };
            
            localStorage.setItem('portfolioSettings', JSON.stringify(settings));
            showStatus('Appearance settings saved!');
            logActivity('Updated appearance settings', 'system');
        }

        function saveAdminSettings() {
            const settings = {
                language: document.getElementById('adminLanguage').value,
                timezone: document.getElementById('adminTimezone').value,
                itemsPerPage: document.getElementById('adminItemsPerPage').value,
                autoSave: document.getElementById('autoSave').value
            };
            
            localStorage.setItem('adminSettings', JSON.stringify(settings));
            showStatus('Admin settings saved!');
        }

        function editProject(projectId) {
            const projectsData = JSON.parse(localStorage.getItem('projectsData') || '{}');
            const project = projectsData[projectId];
            
            if (project) {
                document.getElementById('projectId').value = projectId;
                document.getElementById('projectTitle').value = project.title;
                document.getElementById('projectMeta').value = project.meta;
                document.getElementById('projectDescription').value = project.description;
                document.getElementById('projectImages').value = project.images.join('\n');
                document.getElementById('projectDetails').value = project.details.join('\n');
                document.getElementById('projectTags').value = project.tags.join(', ');
                document.getElementById('projectStatus').value = project.status;
                document.getElementById('projectFeatured').value = project.featured;
                
                // Switch to add project tab
                document.querySelectorAll('.content-tab').forEach(tab => tab.classList.remove('active'));
                document.querySelectorAll('.content-section').forEach(section => section.classList.remove('active'));
                document.querySelector('[data-content="add-project"]').classList.add('active');
                document.getElementById('add-project').classList.add('active');
                
                showStatus('Project loaded for editing!', 'info');
            }
        }

        // Logout
        function logout() {
            sessionStorage.clear();
            window.location.href = 'admin-login.html';
        }

        // Cleanup on page unload
        window.addEventListener('beforeunload', function() {
            if (autoSaveInterval) {
                clearInterval(autoSaveInterval);
            }
        });
    </script>
</body>
</html>